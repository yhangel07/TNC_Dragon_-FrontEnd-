{"version":3,"sources":["./src/app/branch/branch.page.html","./node_modules/rxjs-compat/_esm2015/add/operator/filter.js","./node_modules/rxjs-compat/_esm2015/operator/filter.js","./src/app/branch/branch.module.ts","./src/app/branch/branch.page.scss","./src/app/branch/branch.page.ts"],"names":[],"mappings":";;;;;;;;;AAAA,8MAA8M,SAAS,iYAAiY,UAAU,2XAA2X,qQ;;;;;;;;;;;;ACA79B;AAAA;AAAA;AAAkC;AACa;AAC/C,+CAAU,oBAAoB,uDAAM;AACpC,kC;;;;;;;;;;;;ACHA;AAAA;AAAA;AAA6D;AACtD;AACP,WAAW,6DAAiB;AAC5B;AACA,kC;;;;;;;;;;;;;;;;;;;;;;;;ACJyC;AACM;AACF;AACU;AAEQ;AAEpB;AACa;AACN;AAElD,MAAM,MAAM,GAAW;IACrB;QACE,IAAI,EAAE,EAAE;QACR,SAAS,EAAE,uDAAU;KACtB;CACF,CAAC;AAaF,IAAa,gBAAgB,GAA7B,MAAa,gBAAgB;CAAG;AAAnB,gBAAgB;IAX5B,8DAAQ,CAAC;QACR,OAAO,EAAE;YACP,4DAAY;YACZ,0DAAW;YACX,0DAAW;YACX,4DAAY,CAAC,QAAQ,CAAC,MAAM,CAAC;YAC7B,qEAAa;YACb,6DAAW;SACZ;QACD,YAAY,EAAE,CAAC,uDAAU,CAAC;KAC3B,CAAC;GACW,gBAAgB,CAAG;AAAH;;;;;;;;;;;;AC7B7B,iCAAiC,uBAAuB,iBAAiB,eAAe,EAAE,cAAc,uBAAuB,gBAAgB,kBAAkB,iBAAiB,EAAE,oBAAoB,yCAAyC,uBAAuB,iBAAiB,yDAAyD,EAAE,iBAAiB,uBAAuB,gBAAgB,iBAAiB,2BAA2B,uBAAuB,0BAA0B,iBAAiB,yDAAyD,EAAE,WAAW,oBAAoB,aAAa,cAAc,6CAA6C,6CAA6C,EAAE,iBAAiB,gBAAgB,iBAAiB,qBAAqB,EAAE,sCAAsC,eAAe,EAAE,+CAA+C,+3D;;;;;;;;;;;;;;;;;;;;;;;;ACAx0B;AACO;AACvB;AAE+B;AACL;AACsB;AAGpB;AAS9D,IAAa,UAAU,GAAvB,MAAa,UAAU;IAmBrB,YAAoB,KAAqB,EAAU,WAAwB,EAChE,eAAgC,EAAU,OAAsB,EAC/D,UAA4B,EAAU,MAAc,EACpD,YAAiC;QAHzB,UAAK,GAAL,KAAK,CAAgB;QAAU,gBAAW,GAAX,WAAW,CAAa;QAChE,oBAAe,GAAf,eAAe,CAAiB;QAAU,YAAO,GAAP,OAAO,CAAe;QAC/D,eAAU,GAAV,UAAU,CAAkB;QAAU,WAAM,GAAN,MAAM,CAAQ;QACpD,iBAAY,GAAZ,YAAY,CAAqB;QAlB7C,WAAM,GAAQ,IAAI,CAAC;QAGnB,YAAO,GAAY,KAAK,CAAC;QAGzB,oBAAe,GAAW,EAAE,CAAC;QAC7B,8BAAyB,GAAW,EAAE,CAAC;QAGvC,WAAM,GAAG,cAAc,CAAC;QA2BxB,eAAU,GAAG,yDAAS,CAAC,oDAAoD,EAAE;YAC3E,YAAY,EAAE,IAAI;YAClB,OAAO,EAAE,EAAE;YACX,WAAW,EAAE,yFAAyF;SACvG,CAAC,CAAC;QArBG,KAAK,CAAC,WAAW,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE;YAChC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC,SAAS,CAAC;YAC3B,YAAY,CAAC,YAAY,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YACtC,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC;YACjB,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,cAAc,CAAC;YAEjC,IAAI,CAAC,aAAa,EAAE,CAAC;YACrB,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;YAExB,IAAG,IAAI,CAAC,EAAE,IAAI,CAAC,EAAC;gBACd,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;aACjC;QACL,CAAC,CAAC,CAAC;IACH,CAAC;IAEC,QAAQ;oGAAM,CAAC;KAAA;IAQf,WAAW,CAAC,QAAiB;;YACjC,IAAI,GAAG,GAAG,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;YAEvC,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE;iBAC/B,SAAS,CAAC,QAAQ,CAAC,EAAE;gBACpB,IAAI,CAAC,WAAW,GAAG,QAAQ,CAAC;gBAC5B,IAAI,CAAC,WAAW,CAAC,OAAO,CAAC,MAAM,CAAC,EAAE;oBAChC,IAAI,CAAC,cAAc,GAAG,sDAAM,CAAC,MAAM,CAAC,WAAW,EAAE;wBAC/C,IAAI,EAAE,oDAAI,CAAC;4BACT,QAAQ,EAAE,CAAE,EAAE,EAAE,EAAE,CAAE;4BACpB,UAAU,EAAE,CAAE,EAAE,EAAE,EAAE,CAAE;4BACtB,OAAO,EAAE,kCAAkC;4BAC3C,SAAS,EAAE,0BAA0B;4BACrC,WAAW,EAAE,CAAE,CAAC,EAAE,CAAC,EAAE,CAAE;yBACxB,CAAC;qBACH,CAAC,CAAC,EAAE,CAAC,OAAO,EAAE,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;yBACpD,SAAS,CAAC,MAAM,GAAE,MAAM,CAAC,WAAW,GAAG,OAAO,CAAC,CAAC;oBAGjD,0BAA0B;oBAC1B,IAAI,QAAQ,GAAY,IAAI,CAAC,cAAc,CAAC,SAAS,EAAE,CAAC,UAAU,CAAC,GAAG,CAAC,CAAC;oBACxE,MAAM,CAAC,QAAQ,GAAG,QAAQ,CAAC;oBAE3B,IAAI,CAAC,YAAY,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;oBAEhD,IAAI,QAAQ,GAAG,IAAI,EAAC;wBAClB,IAAI,CAAC,yBAAyB,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;qBAC1D;oBAED,IAAI,CAAC,eAAe,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC;oBAE/C,IAAG,QAAQ,EAAC;wBACV,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,yBAAyB,CAAC;qBAChD;yBAAI;wBACH,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,eAAe,CAAC;qBAEtC;gBACH,CAAC,CAAC,CAAC;YACP,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,eAAe;;YAEnB,IAAI;gBACF,IAAI,IAAI,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;gBACvD,IAAI,CAAC,MAAM,GAAG,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,CAAC,SAAS,CAAC;gBAC3D,OAAO,IAAI,CAAC,MAAM,CAAC;aACpB;YAAC,OAAO,KAAK,EAAE;gBACd,OAAO,CAAC,GAAG,CAAC,wBAAwB,EAAE,KAAK,CAAC,CAAC;gBAC7C,IAAI,CAAC,YAAY,CAAC;oBAChB,SAAS,EAAE,mCAAmC;oBAC9C,OAAO,EAAE,gDAAgD;iBAC1D,CAAC,CAAC;aACJ;QACH,CAAC;KAAA;IAEK,aAAa;;YACf,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,eAAe,EAAE,CAAC;YAE1C,IAAI,CAAC,MAAM,GAAG,sDAAM,CAAC,MAAM,CAAC,CAAC;YAC7B,IAAI,CAAC,IAAI,GAAG,EAAE,CAAC;YAEf,IAAI,CAAC,OAAO,GAAI,sDAAM,CAAE,MAAM,EAAE;gBAC5B,IAAI,EAAE,oDAAI,CAAC;oBACT,QAAQ,EAAE,CAAE,EAAE,EAAE,EAAE,CAAE;oBACpB,UAAU,EAAE,CAAE,EAAE,EAAE,EAAE,CAAE;oBACtB,OAAO,EAAE,2CAA2C;oBACpD,SAAS,EAAE,0BAA0B;iBACtC,CAAC;aACL,CAAC,CAAC;YAEH,IAAI,CAAC,OAAO,GAAG;gBACX,MAAM,EAAE,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC;gBACvC,IAAI,EAAE,IAAI,CAAC,IAAI;gBACf,WAAW,EAAE,KAAK;gBAClB,MAAM,EAAE,IAAI,CAAC,MAAM;aACtB,CAAC;YAEF,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC;QAExB,CAAC;KAAA;IAAA,CAAC;IAEM,UAAU,CAAC,GAAU;;YACzB,UAAU,CAAC,GAAG,EAAE;gBACd,GAAG,CAAC,cAAc,EAAE,CAAC;YACvB,CAAC,EAAE,CAAC,CAAC,CAAC;YAEN,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;QACjB,CAAC;KAAA;IAAA,CAAC;IAEF,SAAS,CAAC,IAAI;QACX,IAAI,GAAG,IAAI,GAAG,IAAI,CAAC;QACnB,OAAO,IAAI,CAAC,KAAK,CAAE,IAAI,GAAG,GAAG,GAAG,MAAM,CAAC,OAAO,CAAE,GAAG,GAAG,CAAC;IAC1D,CAAC;IAAA,CAAC;IAGI,aAAa,CAAC,MAAM,EAAC,MAAO;;YAChC,MAAM,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC;YAC/C,4BAA4B;YAC5B,iCAAiC;YACjC,MAAM;YACN,uCAAuC;YACvC,0DAA0D;YAC1D,6BAA6B;YAE7B,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBACpD,MAAM,EAAE,MAAM,CAAC,WAAW;gBAC1B,SAAS,EAAE,MAAM,CAAC,OAAO;gBACzB,OAAO,EAAC;;;sBAGM,GAAE,MAAM,CAAC,aAAa,GAAG,IAAI;oBACrC,MAAM,CAAC,aAAa;oBACvB;;;;2CAIgC,GAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,QAAQ,CAAC,GAAG;;;SAGtE;gBACD,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,cAAc;wBACpB,OAAO,EAAE,GAAG,EAAE;4BACZ,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,gBAAgB,EAAE,EAAE,WAAW,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,EAAE,EAAE,EAAC,CAAC,CAAC;wBACpF,CAAC;qBACF;oBACD;wBACE,IAAI,EAAE,QAAQ;wBACd,IAAI,EAAE,QAAQ;wBACd,QAAQ,EAAE,WAAW;qBACtB;iBACF;aACF,CAAC,CAAC;YAEH,MAAM,WAAW,CAAC,OAAO,EAAE,CAAC;YAC1B,WAAW,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE,GAAE,CAAC,CAAC,CAAC;QAClD,CAAC;KAAA;IAEK,YAAY,CAAC,OAAW;;YAC5B,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC;gBAC9C,MAAM,EAAE,OAAO;gBACf,SAAS,EAAE,OAAO,CAAC,SAAS;gBAC5B,OAAO,EAAE,OAAO,CAAC,OAAO;gBACxB,OAAO,EAAE,CAAC,IAAI,CAAC;aAChB,CAAC,CAAC;YAEH,MAAM,KAAK,CAAC,OAAO,EAAE,CAAC;YACtB,KAAK,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,EAAE,EAAE;gBACjC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC;YAC3C,CAAC,CAAC,CAAC;QACL,CAAC;KAAA;IAEK,kBAAkB;;YACtB,IAAI,IAAI,GAAkB;gBACxB,QAAQ,EAAE,WAAW;gBACrB,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,QAAQ;wBACd,IAAI,EAAE,QAAQ;qBACf;oBACD;wBACE,IAAI,EAAE,MAAM;qBACb;iBACF;gBACD,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,QAAQ;wBACd,OAAO,EAAE;4BACP,EAAE,IAAI,EAAE,cAAc,EAAE,KAAK,EAAE,KAAK,EAAE;4BACtC,EAAE,IAAI,EAAE,yBAAyB,EAAE,KAAK,EAAE,SAAS,EAAE;yBACtD;qBACF;iBACF;aACF,CAAC;YAEF,IAAI,MAAM,GAAG,MAAM,IAAI,CAAC,UAAU,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC;YAChD,MAAM,CAAC,OAAO,EAAE,CAAC;YACjB,MAAM,CAAC,YAAY,EAAE,CAAC,IAAI,CAAC,CAAM,IAAI,EAAC,EAAE,CAAC;gBACvC,IAAI,GAAG,GAAG,MAAM,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,CAAC;gBAC3C,IAAI,CAAC,MAAM,GAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,IAAI,CAAC;gBAClD,IAAG,GAAG,CAAC,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAC,KAAK,IAAI,KAAK,EAAC;oBAC/C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;iBACzB;qBAAI;oBACH,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;iBACxB;YACH,CAAC,EAAC,CAAC;QACL,CAAC;KAAA;IAED,QAAQ;QACN,IAAI,CAAC,OAAO,CAAC,eAAe,CAAC,cAAc,CAAC,CAAC;IAC/C,CAAC;CACJ;;YA7N4B,8DAAc;YAAuB,yEAAW;YAC/C,8DAAe;YAAmB,4DAAa;YACnD,+DAAgB;YAAkB,sDAAM;YACtC,0EAAmB;;AAtBlC,UAAU;IALtB,+DAAS,CAAC;QACT,QAAQ,EAAE,YAAY;QACtB,0IAAiC;;KAElC,CAAC;2EAoB2B,8DAAc,EAAuB,yEAAW;QAC/C,8DAAe,EAAmB,4DAAa;QACnD,+DAAgB,EAAkB,sDAAM;QACtC,0EAAmB;GAtBlC,UAAU,CAgPtB;AAhPsB","file":"branch-branch-module-es2015.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar color=\\\"dark\\\">\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/choosecomp\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{ brand }} Branches</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content scroll=\\\"false\\\" color=\\\"dark\\\" >\\n    <ion-searchbar placeholder=\\\"Search branches here\\\" (click)=\\\"showList()\\\" \\n        class=\\\"disabled_search\\\" *ngIf=\\\"mapInit\\\" color=\\\"secondary\\\"></ion-searchbar>\\n    <ion-button expand=\\\"full\\\" color=\\\"dark\\\" (click)=\\\"showAdvancedPicker()\\\" *ngIf=\\\"mapInit\\\">\\n      {{ filter }}\\n    </ion-button>\\n\\n    <div class=\\\"spin\\\" *ngIf=\\\"!mapInit\\\">\\n      <ion-spinner name=\\\"dots\\\"></ion-spinner>\\n    </div>\\n    <div *ngIf=\\\"mapInit\\\" class=\\\"mapContainer\\\">\\n      <div class=\\\"btn-container overlay\\\" (click)=\\\"initializeMap()\\\">\\n        <ion-icon class=\\\"custom-btn\\\" name=\\\"locate\\\"></ion-icon>\\n      </div>\\n      <div id=\\\"map\\\" style=\\\"height: 100%;\\\" leaflet \\n        [leafletOptions]=\\\"options\\\"\\n        [(leafletZoom)]=\\\"zoom\\\"\\n        [(leafletCenter)]=\\\"center\\\"\\n        [leafletLayers]=\\\"branches\\\"\\n        (leafletMapReady)=\\\"onMapReady($event)\\\">\\n      </div>\\n    </div>\\n    \\n</ion-content>\\n\"","import { Observable } from 'rxjs';\nimport { filter } from '../../operator/filter';\nObservable.prototype.filter = filter;\n//# sourceMappingURL=filter.js.map","import { filter as higherOrderFilter } from 'rxjs/operators';\nexport function filter(predicate, thisArg) {\n    return higherOrderFilter(predicate, thisArg)(this);\n}\n//# sourceMappingURL=filter.js.map","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule, PickerController } from '@ionic/angular';\n\nimport { BranchPage } from './branch.page';\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\nimport { PipesModule } from '../pipe/pipe.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BranchPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    LeafletModule,\n    PipesModule\n  ],\n  declarations: [BranchPage]\n})\nexport class BranchPageModule {}\n","module.exports = \".mapContainer {\\n  position: relative;\\n  height: 100%;\\n  z-index: 1; }\\n\\n.overlay {\\n  position: absolute;\\n  right: 10px;\\n  bottom: 150px;\\n  z-index: 999; }\\n\\n.btn-container {\\n  border: 2px solid rgba(0, 0, 0, 0.2);\\n  border-radius: 2px;\\n  height: 34px;\\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4); }\\n\\n.custom-btn {\\n  border-radius: 2px;\\n  width: 30px;\\n  height: 30px;\\n  background-color: #fff;\\n  text-align: center;\\n  text-decoration: none;\\n  color: black;\\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4); }\\n\\n.spin {\\n  position: fixed;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%); }\\n\\nion-spinner {\\n  width: 28px;\\n  height: 28px;\\n  --color: #a0a4ab; }\\n\\n.disabled_search input[disabled] {\\n  opacity: 1; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXN0ZXJ5aGFuL0RldmVsb3BtZW50L1ROQ19EcmFnb25fLUZyb250RW5kLS9zcmMvYXBwL2JyYW5jaC9icmFuY2gucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixVQUFVLEVBQUE7O0FBRWQ7RUFDSSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLGFBQWE7RUFDYixZQUFZLEVBQUE7O0FBRWhCO0VBQ0ksb0NBQWlDO0VBQ2pDLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osb0RBQW9ELEVBQUE7O0FBRXhEO0VBQ0ksa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQixxQkFBcUI7RUFDckIsWUFBWTtFQUNaLG9EQUFvRCxFQUFBOztBQUd4RDtFQUNJLGVBQWU7RUFDZixRQUFRO0VBQ1IsU0FBUztFQUNULHdDQUFnQztVQUFoQyxnQ0FBZ0MsRUFBQTs7QUFFbkM7RUFDRyxXQUFXO0VBQ1gsWUFBWTtFQUNaLGdCQUFRLEVBQUE7O0FBRVg7RUFFTyxVQUFVLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9icmFuY2gvYnJhbmNoLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXBDb250YWluZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgei1pbmRleDogMTtcbn1cbi5vdmVybGF5e1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMTBweDtcbiAgICBib3R0b206IDE1MHB4O1xuICAgIHotaW5kZXg6IDk5OTtcbn1cbi5idG4tY29udGFpbmVye1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMCwwLDAsMC4yKTtcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgaGVpZ2h0OiAzNHB4O1xuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogcmdiYSg1MSwgMTgxLCAyMjksIDAuNCk7XG59XG4uY3VzdG9tLWJ0bntcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgd2lkdGg6IDMwcHg7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogYmxhY2s7XG4gICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDUxLCAxODEsIDIyOSwgMC40KTtcbn1cblxuLnNwaW57XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiB9XG4gaW9uLXNwaW5uZXIge1xuICAgIHdpZHRoOiAyOHB4O1xuICAgIGhlaWdodDogMjhweDtcbiAgICAtLWNvbG9yOiAjYTBhNGFiO1xuIH1cbiAuZGlzYWJsZWRfc2VhcmNoe1xuICAgIGlucHV0W2Rpc2FibGVkXSB7XG4gICAgICAgIG9wYWNpdHk6IDE7XG4gICAgfVxuIH0iXX0= */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport 'rxjs/add/operator/filter';\n\nimport { icon, latLng, marker, Layer, tileLayer } from 'leaflet';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { AlertController, NavController, PickerController } from '@ionic/angular';\nimport { HttpClient } from '@angular/common/http';\nimport { PickerOptions, PickerButton } from '@ionic/core';\nimport { BranchesListService } from './branches-list.service';\nimport * as L from 'leaflet';\n\n\n@Component({\n  selector: 'app-branch',\n  templateUrl: './branch.page.html',\n  styleUrls: ['./branch.page.scss'],\n})\nexport class BranchPage implements OnInit {\n\n  brand: string;\n  id: number;\n  center: any = null;\n  zoom: any;\n  userLoc: any;\n  mapInit: Boolean = false;\n  options: any;\n  branchesCoords: any;\n  branchesMarkers: Layer[]= [];\n  branchesMarkersLessFiveKM: Layer[]= [];\n  coords: any;\n  branches: any;\n  filter = 'All Branches';\n  branch_list: any;\n  map: any;\n  branch: any;\n\n  constructor(private route: ActivatedRoute, private geolocation: Geolocation, \n      public alertController: AlertController, private navCtrl: NavController,\n      private pickerCtrl: PickerController, private router: Router,\n      private branchesList: BranchesListService) {\n\n        route.queryParams.subscribe(val => {\n          this.brand = val.brandName;\n          branchesList.setBrandName(this.brand);\n          this.id = val.id;\n          this.branch = val.selectedBranch;\n\n          this.initializeMap();\n          this.getBranches(false);\n\n          if(this.id == 3){\n            this.onMarkerClick(this.branch);\n          }\n      });\n      }\n\n  async ngOnInit() {  }\n\n  streetMaps = tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    detectRetina: true,\n    maxZoom: 18,\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  });\n\n  async getBranches(filtered: Boolean){\n    let ref = await this.getUserLocation();\n\n    this.branchesList.getRawBranches()\n      .subscribe(branches => {\n        this.branch_list = branches;\n        this.branch_list.forEach(branch => {\n          this.branchesCoords = marker(branch.coordinates, {\n            icon: icon({\n              iconSize: [ 30, 46 ],\n              iconAnchor: [ 17, 46 ],\n              iconUrl: '../assets/img/tnc_map_marker.png',\n              shadowUrl: 'assets/marker-shadow.png',\n              popupAnchor: [ 0, -41 ]\n            })\n          }).on('click', this.onMarkerClick.bind(this, branch))\n          .bindPopup('<h4>'+ branch.branch_name + '</h4>');\n          \n\n          //check distance from user\n          let distance: number =  this.branchesCoords.getLatLng().distanceTo(ref);\n          branch.distance = distance;\n\n          this.branchesList.setBranches(this.branch_list);\n\n          if (distance < 5000){\n            this.branchesMarkersLessFiveKM.push(this.branchesCoords);\n          }\n          \n          this.branchesMarkers.push(this.branchesCoords);\n          \n          if(filtered){\n            this.branches = this.branchesMarkersLessFiveKM;\n          }else{\n            this.branches = this.branchesMarkers;\n\n          }\n        });\n    });\n  }\n\n  async getUserLocation(): Promise<any>{\n\n    try {\n      let resp = await this.geolocation.getCurrentPosition();\n      this.coords = [resp.coords.latitude, resp.coords.longitude]\n      return this.coords;\n    } catch (error) {\n      console.log('Error getting location', error);\n      this.presentAlert({\n        subHeader: 'Access to geolocation was blocked',\n        message: 'Please allow location detection to use feature'\n      });\n    }\n  }\n\n  async initializeMap(){\n      let coords = await this.getUserLocation();\n\n      this.center = latLng(coords);\n      this.zoom = 14;\n    \n      this.userLoc =  marker( coords, {\n          icon: icon({\n            iconSize: [ 25, 41 ],\n            iconAnchor: [ 13, 41 ],\n            iconUrl: '../assets/img/default_location_marker.png',\n            shadowUrl: 'assets/marker-shadow.png'\n          })\n      });\n\n      this.options = {\n          layers: [this.streetMaps, this.userLoc],\n          zoom: this.zoom,\n          zoomControl: false,\n          center: this.center\n      };\n\n      this.mapInit = true;\n\n  };\n\n    async onMapReady(map: L.Map) {\n      setTimeout(() => {\n        map.invalidateSize();\n      }, 0);\n\n      this.map = map;\n    };\n\n    meterToKM(dist){\n       dist = dist / 1000;\n       return Math.round( dist * 100 + Number.EPSILON ) / 100;\n    };\n\n    \n    async onMarkerClick(branch,marker?) {\n      await this.map.setView(branch.coordinates, 18);\n      // var popup = new L.Popup({\n      //   offset:  new L.Point(0, -40)\n      // });\n      // popup.setLatLng(branch.coordinates);\n      // popup.setContent('<h4>'+ branch.branch_name + '</h4>');\n      // this.map.openPopup(popup);\n\n      const branchPopUp = await this.alertController.create({\n        header: branch.branch_name,\n        subHeader: branch.address,\n        message:`\n        <div>\n          <p>\n            <a href=\"`+ branch.facebook_link + `\">` +\n              branch.facebook_link +\n           `</a>\n          </p>\n          <hr>\n          <p>\n            <span>Branch Distance: </span>`+ this.meterToKM(branch.distance) + ` km\n          </p>\n        </div>\n        `,\n        buttons: [\n          {\n            text: 'View Details',\n            handler: () => {\n              this.navCtrl.navigateForward('/branchprofile', { queryParams: { id: branch.id }});\n            }\n          },\n          {\n            text: 'Cancel',\n            role: 'cancel',\n            cssClass: 'secondary'\n          }\n        ]\n      });\n  \n      await branchPopUp.present();\n        branchPopUp.onDidDismiss().then((data) => {});\n    }\n\n    async presentAlert(message:any) {\n      const alert = await this.alertController.create({\n        header: 'Alert',\n        subHeader: message.subHeader,\n        message: message.message,\n        buttons: ['OK']\n      });\n  \n      await alert.present();\n      alert.onDidDismiss().then((data) => {\n        this.navCtrl.navigateRoot('/choosecomp');\n      });\n    }\n\n    async showAdvancedPicker() {\n      let opts: PickerOptions = {\n        cssClass: 'my-picker',\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel'\n          },\n          {\n            text: 'Done'\n          }\n        ],\n        columns: [\n          {\n            name: 'filter',\n            options: [\n              { text: 'All Branches', value: 'all' },\n              { text: 'Nearest Branches (5 KM)', value: 'nearest' }\n            ]\n          }\n        ]\n      };\n\n      let picker = await this.pickerCtrl.create(opts);\n      picker.present();\n      picker.onDidDismiss().then(async data => {\n        let col = await picker.getColumn('filter');\n        this.filter = col.options[col.selectedIndex].text;\n        if(col.options[col.selectedIndex].value == 'all'){\n          this.getBranches(false);\n        }else{\n          this.getBranches(true);\n        }\n      });\n    }\n\n    showList(){\n      this.navCtrl.navigateForward('/branch-list');\n    }\n}\n"],"sourceRoot":""}