{"version":3,"sources":["./src/app/branch/branch.page.html","./node_modules/rxjs-compat/_esm5/add/operator/filter.js","./node_modules/rxjs-compat/_esm5/operator/filter.js","./src/app/branch/branch.module.ts","./src/app/branch/branch.page.scss","./src/app/branch/branch.page.ts"],"names":[],"mappings":"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","file":"branch-branch-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\n  <ion-toolbar>\\n    <ion-buttons slot=\\\"start\\\">\\n      <ion-back-button defaultHref=\\\"/choosecomp\\\"></ion-back-button>\\n    </ion-buttons>\\n    <ion-title>{{ brand }} Branches</ion-title>\\n  </ion-toolbar>\\n</ion-header>\\n\\n<ion-content scroll=\\\"false\\\">\\n    <ion-searchbar placeholder=\\\"Search branches here\\\" (click)=\\\"showList()\\\" \\n        class=\\\"disabled_search\\\" *ngIf=\\\"mapInit\\\"></ion-searchbar>\\n    <ion-button expand=\\\"full\\\" color=\\\"medium\\\" (click)=\\\"showBasicPicker()\\\" *ngIf=\\\"mapInit\\\">\\n      {{ filter }}\\n    </ion-button>\\n\\n    <div class=\\\"spin\\\" *ngIf=\\\"!mapInit\\\">\\n      <ion-spinner name=\\\"dots\\\"></ion-spinner>\\n    </div>\\n    <div *ngIf=\\\"mapInit\\\" class=\\\"mapContainer\\\">\\n      <div class=\\\"btn-container overlay\\\" (click)=\\\"initializeMap()\\\">\\n        <ion-icon class=\\\"custom-btn\\\" name=\\\"locate\\\"></ion-icon>\\n      </div>\\n      <div style=\\\"height: 100%;\\\" leaflet \\n        [leafletOptions]=\\\"options\\\"\\n        [(leafletZoom)]=\\\"zoom\\\"\\n        [(leafletCenter)]=\\\"center\\\"\\n        [leafletLayers]=\\\"branches\\\">\\n      </div>\\n    </div>\\n    \\n</ion-content>\\n\"","import { Observable } from 'rxjs';\nimport { filter } from '../../operator/filter';\nObservable.prototype.filter = filter;\n//# sourceMappingURL=filter.js.map","import { filter as higherOrderFilter } from 'rxjs/operators';\nexport function filter(predicate, thisArg) {\n    return higherOrderFilter(predicate, thisArg)(this);\n}\n//# sourceMappingURL=filter.js.map","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule, PickerController } from '@ionic/angular';\n\nimport { BranchPage } from './branch.page';\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\nimport { PipesModule } from '../pipe/pipe.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: BranchPage\n  }\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    IonicModule,\n    RouterModule.forChild(routes),\n    LeafletModule,\n    PipesModule\n  ],\n  declarations: [BranchPage]\n})\nexport class BranchPageModule {}\n","module.exports = \".mapContainer {\\n  position: relative;\\n  height: 100%;\\n  z-index: 1; }\\n\\n.overlay {\\n  position: absolute;\\n  right: 10px;\\n  bottom: 150px;\\n  z-index: 999; }\\n\\n.btn-container {\\n  border: 2px solid rgba(0, 0, 0, 0.2);\\n  border-radius: 2px;\\n  height: 34px;\\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4); }\\n\\n.custom-btn {\\n  border-radius: 2px;\\n  width: 30px;\\n  height: 30px;\\n  background-color: #fff;\\n  text-align: center;\\n  text-decoration: none;\\n  color: black;\\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4); }\\n\\n.spin {\\n  position: fixed;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%); }\\n\\nion-spinner {\\n  width: 28px;\\n  height: 28px;\\n  stroke: #444;\\n  fill: #222; }\\n\\n.disabled_search input[disabled] {\\n  opacity: 1; }\\n\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9tYXN0ZXJ5aGFuL0RldmVsb3BtZW50L1ROQ19EcmFnb25fLUZyb250RW5kLS9zcmMvYXBwL2JyYW5jaC9icmFuY2gucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQWtCO0VBQ2xCLFlBQVk7RUFDWixVQUFVLEVBQUE7O0FBRWQ7RUFDSSxrQkFBa0I7RUFDbEIsV0FBVztFQUNYLGFBQWE7RUFDYixZQUFZLEVBQUE7O0FBRWhCO0VBQ0ksb0NBQWlDO0VBQ2pDLGtCQUFrQjtFQUNsQixZQUFZO0VBQ1osb0RBQW9ELEVBQUE7O0FBRXhEO0VBQ0ksa0JBQWtCO0VBQ2xCLFdBQVc7RUFDWCxZQUFZO0VBQ1osc0JBQXNCO0VBQ3RCLGtCQUFrQjtFQUNsQixxQkFBcUI7RUFDckIsWUFBWTtFQUNaLG9EQUFvRCxFQUFBOztBQUd4RDtFQUNJLGVBQWU7RUFDZixRQUFRO0VBQ1IsU0FBUztFQUNULHdDQUFnQztVQUFoQyxnQ0FBZ0MsRUFBQTs7QUFFbkM7RUFDRyxXQUFXO0VBQ1gsWUFBWTtFQUNaLFlBQVk7RUFDWixVQUFVLEVBQUE7O0FBRWI7RUFFTyxVQUFVLEVBQUEiLCJmaWxlIjoic3JjL2FwcC9icmFuY2gvYnJhbmNoLnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5tYXBDb250YWluZXIge1xuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgICBoZWlnaHQ6IDEwMCU7XG4gICAgei1pbmRleDogMTtcbn1cbi5vdmVybGF5e1xuICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgICByaWdodDogMTBweDtcbiAgICBib3R0b206IDE1MHB4O1xuICAgIHotaW5kZXg6IDk5OTtcbn1cbi5idG4tY29udGFpbmVye1xuICAgIGJvcmRlcjogMnB4IHNvbGlkIHJnYmEoMCwwLDAsMC4yKTtcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgaGVpZ2h0OiAzNHB4O1xuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogcmdiYSg1MSwgMTgxLCAyMjksIDAuNCk7XG59XG4uY3VzdG9tLWJ0bntcbiAgICBib3JkZXItcmFkaXVzOiAycHg7XG4gICAgd2lkdGg6IDMwcHg7XG4gICAgaGVpZ2h0OiAzMHB4O1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNmZmY7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcbiAgICBjb2xvcjogYmxhY2s7XG4gICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDUxLCAxODEsIDIyOSwgMC40KTtcbn1cblxuLnNwaW57XG4gICAgcG9zaXRpb246IGZpeGVkO1xuICAgIHRvcDogNTAlO1xuICAgIGxlZnQ6IDUwJTtcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbiB9XG4gaW9uLXNwaW5uZXIge1xuICAgIHdpZHRoOiAyOHB4O1xuICAgIGhlaWdodDogMjhweDtcbiAgICBzdHJva2U6ICM0NDQ7XG4gICAgZmlsbDogIzIyMjtcbiB9XG4gLmRpc2FibGVkX3NlYXJjaHtcbiAgICBpbnB1dFtkaXNhYmxlZF0ge1xuICAgICAgICBvcGFjaXR5OiAxO1xuICAgIH1cbiB9Il19 */\"","import { Component, OnInit } from '@angular/core';\nimport { ActivatedRoute } from '@angular/router';\nimport 'rxjs/add/operator/filter';\n\nimport { icon, latLng, marker, Layer, tileLayer } from 'leaflet';\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\nimport { AlertController, NavController, PickerController } from '@ionic/angular';\nimport { HttpClient } from '@angular/common/http';\nimport { PickerOptions, PickerButton } from '@ionic/core';\nimport { BranchesListService } from './branches-list.service';\n\n\n@Component({\n  selector: 'app-branch',\n  templateUrl: './branch.page.html',\n  styleUrls: ['./branch.page.scss'],\n})\nexport class BranchPage implements OnInit {\n\n  brand: string;\n  id: number;\n  center: any = null;\n  zoom: any;\n  userLoc: any;\n  mapInit: Boolean = false;\n  options: any;\n  branchesCoords: any;\n  branchesMarkers: Layer[]= [];\n  branchesMarkersLessFiveKM: Layer[]= [];\n  coords: any;\n  branches: any;\n  filter = 'All Branches';\n  branch_list: any;\n\n\n  constructor(private route: ActivatedRoute, private geolocation: Geolocation, \n      public alertController: AlertController, private navCtrl: NavController,\n      private http: HttpClient, private pickerCtrl: PickerController,\n      private branchesList: BranchesListService) {}\n\n  ngOnInit() {\n    this.route.queryParams\n      .filter(params => params.brandName)\n      .subscribe(params => {\n        this.brand = params.brandName;\n        this.id = params.id;\n      });\n\n    this.initializeMap();\n    this.getBranches(false);\n  }\n\n  streetMaps = tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\n    detectRetina: true,\n    maxZoom: 18,\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\n  });\n\n  async getBranches(filtered: Boolean){\n    let ref = await this.getUserLocation();\n\n    this.branchesList.getRawBranches()\n      .subscribe(branches => {\n        this.branch_list = branches;\n        this.branch_list.forEach(branch => {\n          this.branchesCoords = marker(branch.coordinates, {\n            icon: icon({\n              iconSize: [ 30, 46 ],\n              iconAnchor: [ 17, 46 ],\n              iconUrl: '../assets/img/tnc_map_marker.png',\n              shadowUrl: 'assets/marker-shadow.png'\n            })\n          }).on('click', this.branchInfo.bind(this, branch));\n\n          //check distance from user\n          let distance: number =  this.branchesCoords.getLatLng().distanceTo(ref);\n          branch.distance = distance;\n\n          this.branchesList.setBranches(this.branch_list);\n\n          if (distance < 5000){\n            this.branchesMarkersLessFiveKM.push(this.branchesCoords);\n          }\n          \n          this.branchesMarkers.push(this.branchesCoords);\n          \n          if(filtered){\n            this.branches = this.branchesMarkersLessFiveKM;\n          }else{\n            this.branches = this.branchesMarkers;\n\n          }\n        });\n    });\n  }\n\n  branchInfo(marker, name){\n    console.log(marker);\n    console.log(name);\n  };\n\n  async getUserLocation(): Promise<any>{\n\n    try {\n      let resp = await this.geolocation.getCurrentPosition();\n      this.coords = [resp.coords.latitude, resp.coords.longitude]\n      return this.coords;\n    } catch (error) {\n      console.log('Error getting location', error);\n      this.presentAlert({\n        subHeader: 'Access to geolocation was blocked',\n        message: 'Please allow location detection to use feature'\n      });\n    }\n  }\n\n  async initializeMap(){\n      let coords = await this.getUserLocation();\n\n      this.center = latLng(coords);\n      this.zoom = 14;\n    \n      this.userLoc =  marker( coords, {\n          icon: icon({\n            iconSize: [ 25, 41 ],\n            iconAnchor: [ 13, 41 ],\n            iconUrl: '../assets/img/default_location_marker.png',\n            shadowUrl: 'assets/marker-shadow.png'\n          })\n      });\n\n      this.options = {\n          layers: [this.streetMaps, this.userLoc],\n          zoom: this.zoom,\n          zoomControl: false,\n          center: this.center\n      };\n\n      this.mapInit = true;\n\n  };\n\n    onMapReady(map: L.Map) {\n      map.off('click');\n      setTimeout(() => {\n        map.invalidateSize();\n      }, 0);\n    };\n\n  \n    async presentAlert(message:any) {\n      const alert = await this.alertController.create({\n        header: 'Alert',\n        subHeader: message.subHeader,\n        message: message.message,\n        buttons: ['OK']\n      });\n  \n      await alert.present();\n      alert.onDidDismiss().then((data) => {\n        this.navCtrl.navigateRoot('/choosecomp');\n      });\n    }\n\n    async showBasicPicker() {\n      let opts: PickerOptions = {\n        buttons: [\n          {\n            text: 'Cancel',\n            role: 'cancel'\n          },\n          {\n            text: 'Done'\n          }\n        ],\n        columns: [\n          {\n            name: 'filter',\n            options: [\n              { text: 'All Branches', value: 'all' },\n              { text: 'Nearest Branches (5 KM)', value: 'nearest' }\n            ]\n          }\n        ]\n      };\n\n      let picker = await this.pickerCtrl.create(opts);\n      picker.present();\n      picker.onDidDismiss().then(async data => {\n        let col = await picker.getColumn('filter');\n        this.filter = col.options[col.selectedIndex].text;\n        if(col.options[col.selectedIndex].value == 'all'){\n          this.getBranches(false);\n        }else{\n          this.getBranches(true);\n        }\n      });\n    }\n\n    showList(){\n      this.navCtrl.navigateForward('/branch-list');\n    }\n}\n"],"sourceRoot":""}