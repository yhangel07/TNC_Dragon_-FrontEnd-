{"version":3,"sources":["./src/app/branch/branch.page.html","./node_modules/rxjs-compat/_esm5/add/operator/filter.js","./node_modules/rxjs-compat/_esm5/operator/filter.js","./src/app/branch/branch.module.ts","./src/app/branch/branch.page.scss","./src/app/branch/branch.page.ts"],"names":[],"mappings":"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","file":"branch-branch-module-es5.js","sourcesContent":["module.exports = \"<ion-header>\\r\\n  <ion-toolbar color=\\\"dark\\\">\\r\\n    <ion-buttons slot=\\\"start\\\">\\r\\n      <ion-back-button defaultHref=\\\"/choosecomp\\\"></ion-back-button>\\r\\n    </ion-buttons>\\r\\n    <ion-title>{{ brand }} Branches</ion-title>\\r\\n  </ion-toolbar>\\r\\n</ion-header>\\r\\n\\r\\n<ion-content scroll=\\\"false\\\" color=\\\"dark\\\" >\\r\\n    <ion-searchbar placeholder=\\\"Search branches here\\\" (click)=\\\"showList()\\\" \\r\\n        class=\\\"disabled_search\\\" *ngIf=\\\"mapInit\\\" color=\\\"secondary\\\"></ion-searchbar>\\r\\n    <ion-button expand=\\\"full\\\" color=\\\"dark\\\" (click)=\\\"showAdvancedPicker()\\\" *ngIf=\\\"mapInit\\\">\\r\\n      {{ filter }}\\r\\n    </ion-button>\\r\\n\\r\\n    <div class=\\\"spin\\\" *ngIf=\\\"!mapInit\\\">\\r\\n      <ion-spinner name=\\\"dots\\\"></ion-spinner>\\r\\n    </div>\\r\\n    <div *ngIf=\\\"mapInit\\\" class=\\\"mapContainer\\\">\\r\\n      <div class=\\\"btn-container overlay\\\" (click)=\\\"initializeMap()\\\">\\r\\n        <ion-icon class=\\\"custom-btn\\\" name=\\\"locate\\\"></ion-icon>\\r\\n      </div>\\r\\n      <div id=\\\"map\\\" style=\\\"height: 100%;\\\" leaflet \\r\\n        [leafletOptions]=\\\"options\\\"\\r\\n        [(leafletZoom)]=\\\"zoom\\\"\\r\\n        [(leafletCenter)]=\\\"center\\\"\\r\\n        [leafletLayers]=\\\"branches\\\"\\r\\n        (leafletMapReady)=\\\"onMapReady($event)\\\">\\r\\n      </div>\\r\\n    </div>\\r\\n    \\r\\n</ion-content>\\r\\n\"","import { Observable } from 'rxjs';\nimport { filter } from '../../operator/filter';\nObservable.prototype.filter = filter;\n//# sourceMappingURL=filter.js.map","import { filter as higherOrderFilter } from 'rxjs/operators';\nexport function filter(predicate, thisArg) {\n    return higherOrderFilter(predicate, thisArg)(this);\n}\n//# sourceMappingURL=filter.js.map","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { IonicModule, PickerController } from '@ionic/angular';\r\n\r\nimport { BranchPage } from './branch.page';\r\nimport { LeafletModule } from '@asymmetrik/ngx-leaflet';\r\nimport { PipesModule } from '../pipe/pipe.module';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: BranchPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RouterModule.forChild(routes),\r\n    LeafletModule,\r\n    PipesModule\r\n  ],\r\n  declarations: [BranchPage]\r\n})\r\nexport class BranchPageModule {}\r\n","module.exports = \".mapContainer {\\n  position: relative;\\n  height: 100%;\\n  z-index: 1;\\n}\\n\\n.overlay {\\n  position: absolute;\\n  right: 10px;\\n  bottom: 150px;\\n  z-index: 999;\\n}\\n\\n.btn-container {\\n  border: 2px solid rgba(0, 0, 0, 0.2);\\n  border-radius: 2px;\\n  height: 34px;\\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\\n}\\n\\n.custom-btn {\\n  border-radius: 2px;\\n  width: 30px;\\n  height: 30px;\\n  background-color: #fff;\\n  text-align: center;\\n  text-decoration: none;\\n  color: black;\\n  -webkit-tap-highlight-color: rgba(51, 181, 229, 0.4);\\n}\\n\\n.spin {\\n  position: fixed;\\n  top: 50%;\\n  left: 50%;\\n  -webkit-transform: translate(-50%, -50%);\\n          transform: translate(-50%, -50%);\\n}\\n\\nion-spinner {\\n  width: 28px;\\n  height: 28px;\\n  --color: #a0a4ab;\\n}\\n\\n.disabled_search input[disabled] {\\n  opacity: 1;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvYnJhbmNoL2M6XFxVc2Vyc1xcUmlkYSBMZWVcXERlc2t0b3BcXFROQyBBcHBzXFxpb25pY1xcdG5jYXBwL3NyY1xcYXBwXFxicmFuY2hcXGJyYW5jaC5wYWdlLnNjc3MiLCJzcmMvYXBwL2JyYW5jaC9icmFuY2gucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksa0JBQUE7RUFDQSxZQUFBO0VBQ0EsVUFBQTtBQ0NKOztBRENBO0VBQ0ksa0JBQUE7RUFDQSxXQUFBO0VBQ0EsYUFBQTtFQUNBLFlBQUE7QUNFSjs7QURBQTtFQUNJLG9DQUFBO0VBQ0Esa0JBQUE7RUFDQSxZQUFBO0VBQ0Esb0RBQUE7QUNHSjs7QUREQTtFQUNJLGtCQUFBO0VBQ0EsV0FBQTtFQUNBLFlBQUE7RUFDQSxzQkFBQTtFQUNBLGtCQUFBO0VBQ0EscUJBQUE7RUFDQSxZQUFBO0VBQ0Esb0RBQUE7QUNJSjs7QUREQTtFQUNJLGVBQUE7RUFDQSxRQUFBO0VBQ0EsU0FBQTtFQUNBLHdDQUFBO1VBQUEsZ0NBQUE7QUNJSjs7QURGQztFQUNHLFdBQUE7RUFDQSxZQUFBO0VBQ0EsZ0JBQUE7QUNLSjs7QURGSTtFQUNJLFVBQUE7QUNLUiIsImZpbGUiOiJzcmMvYXBwL2JyYW5jaC9icmFuY2gucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLm1hcENvbnRhaW5lciB7XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICB6LWluZGV4OiAxO1xyXG59XHJcbi5vdmVybGF5e1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgcmlnaHQ6IDEwcHg7XHJcbiAgICBib3R0b206IDE1MHB4O1xyXG4gICAgei1pbmRleDogOTk5O1xyXG59XHJcbi5idG4tY29udGFpbmVye1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgcmdiYSgwLDAsMCwwLjIpO1xyXG4gICAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gICAgaGVpZ2h0OiAzNHB4O1xyXG4gICAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDUxLCAxODEsIDIyOSwgMC40KTtcclxufVxyXG4uY3VzdG9tLWJ0bntcclxuICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgIHdpZHRoOiAzMHB4O1xyXG4gICAgaGVpZ2h0OiAzMHB4O1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIGNvbG9yOiBibGFjaztcclxuICAgIC13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcjogcmdiYSg1MSwgMTgxLCAyMjksIDAuNCk7XHJcbn1cclxuXHJcbi5zcGlue1xyXG4gICAgcG9zaXRpb246IGZpeGVkO1xyXG4gICAgdG9wOiA1MCU7XHJcbiAgICBsZWZ0OiA1MCU7XHJcbiAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcclxuIH1cclxuIGlvbi1zcGlubmVyIHtcclxuICAgIHdpZHRoOiAyOHB4O1xyXG4gICAgaGVpZ2h0OiAyOHB4O1xyXG4gICAgLS1jb2xvcjogI2EwYTRhYjtcclxuIH1cclxuIC5kaXNhYmxlZF9zZWFyY2h7XHJcbiAgICBpbnB1dFtkaXNhYmxlZF0ge1xyXG4gICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICB9XHJcbiB9XHJcblxyXG4gIiwiLm1hcENvbnRhaW5lciB7XG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgaGVpZ2h0OiAxMDAlO1xuICB6LWluZGV4OiAxO1xufVxuXG4ub3ZlcmxheSB7XG4gIHBvc2l0aW9uOiBhYnNvbHV0ZTtcbiAgcmlnaHQ6IDEwcHg7XG4gIGJvdHRvbTogMTUwcHg7XG4gIHotaW5kZXg6IDk5OTtcbn1cblxuLmJ0bi1jb250YWluZXIge1xuICBib3JkZXI6IDJweCBzb2xpZCByZ2JhKDAsIDAsIDAsIDAuMik7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgaGVpZ2h0OiAzNHB4O1xuICAtd2Via2l0LXRhcC1oaWdobGlnaHQtY29sb3I6IHJnYmEoNTEsIDE4MSwgMjI5LCAwLjQpO1xufVxuXG4uY3VzdG9tLWJ0biB7XG4gIGJvcmRlci1yYWRpdXM6IDJweDtcbiAgd2lkdGg6IDMwcHg7XG4gIGhlaWdodDogMzBweDtcbiAgYmFja2dyb3VuZC1jb2xvcjogI2ZmZjtcbiAgdGV4dC1hbGlnbjogY2VudGVyO1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIGNvbG9yOiBibGFjaztcbiAgLXdlYmtpdC10YXAtaGlnaGxpZ2h0LWNvbG9yOiByZ2JhKDUxLCAxODEsIDIyOSwgMC40KTtcbn1cblxuLnNwaW4ge1xuICBwb3NpdGlvbjogZml4ZWQ7XG4gIHRvcDogNTAlO1xuICBsZWZ0OiA1MCU7XG4gIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xufVxuXG5pb24tc3Bpbm5lciB7XG4gIHdpZHRoOiAyOHB4O1xuICBoZWlnaHQ6IDI4cHg7XG4gIC0tY29sb3I6ICNhMGE0YWI7XG59XG5cbi5kaXNhYmxlZF9zZWFyY2ggaW5wdXRbZGlzYWJsZWRdIHtcbiAgb3BhY2l0eTogMTtcbn0iXX0= */\"","import { Component, OnInit } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport 'rxjs/add/operator/filter';\r\n\r\nimport { icon, latLng, marker, Layer, tileLayer } from 'leaflet';\r\nimport { Geolocation } from '@ionic-native/geolocation/ngx';\r\nimport { LocationAccuracy } from '@ionic-native/location-accuracy/ngx';\r\n\r\nimport { AlertController, NavController, PickerController } from '@ionic/angular';\r\nimport { HttpClient } from '@angular/common/http';\r\nimport { PickerOptions, PickerButton } from '@ionic/core';\r\nimport { BranchesListService } from './branches-list.service';\r\nimport * as L from 'leaflet';\r\n\r\n\r\n@Component({\r\n  selector: 'app-branch',\r\n  templateUrl: './branch.page.html',\r\n  styleUrls: ['./branch.page.scss'],\r\n})\r\nexport class BranchPage implements OnInit {\r\n\r\n  brand: string;\r\n  id: number;\r\n  center: any = null;\r\n  zoom: any;\r\n  userLoc: any;\r\n  mapInit: Boolean = false;\r\n  options: any;\r\n  branchesCoords: any;\r\n  branchesMarkers: Layer[]= [];\r\n  branchesMarkersLessFiveKM: Layer[]= [];\r\n  coords: any;\r\n  branches: any;\r\n  filter = 'All Branches';\r\n  branch_list: any;\r\n  map: any;\r\n  branch: any;\r\n\r\n  constructor(private route: ActivatedRoute, private geolocation: Geolocation, \r\n      public alertController: AlertController, private navCtrl: NavController,\r\n      private pickerCtrl: PickerController, private router: Router,\r\n      private branchesList: BranchesListService, private locationAccuracy: LocationAccuracy) {\r\n\r\n        route.queryParams.subscribe(val => {\r\n          this.brand = val.brandName;\r\n          branchesList.setBrandName(this.brand);\r\n          this.id = val.id;\r\n          this.branch = val.selectedBranch;\r\n\r\n          this.initializeMap();\r\n          this.getBranches(false);\r\n\r\n          if(this.id == 3){\r\n            this.onMarkerClick(this.branch);\r\n          }\r\n      });\r\n      }\r\n\r\n  async ngOnInit() {  }\r\n\r\n  streetMaps = tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n    detectRetina: true,\r\n    maxZoom: 18,\r\n    attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n  });\r\n\r\n  async getBranches(filtered: Boolean){\r\n    let ref = await this.getUserLocation();\r\n\r\n    this.branchesList.getRawBranches()\r\n      .subscribe(branches => {\r\n        this.branch_list = branches;\r\n        this.branch_list.forEach(branch => {\r\n          this.branchesCoords = marker(branch.coordinates, {\r\n            icon: icon({\r\n              iconSize: [ 30, 46 ],\r\n              iconAnchor: [ 17, 46 ],\r\n              iconUrl: 'assets/img/tnc_map_marker.png',\r\n              shadowUrl: 'assets/marker-shadow.png',\r\n              popupAnchor: [ 0, -41 ]\r\n            })\r\n          }).on('click', this.onMarkerClick.bind(this, branch))\r\n          .bindPopup('<h4>'+ branch.branch_name + '</h4>');\r\n          \r\n\r\n          //check distance from user\r\n          let distance: number =  this.branchesCoords.getLatLng().distanceTo(ref);\r\n          branch.distance = distance;\r\n\r\n          this.branchesList.setBranches(this.branch_list);\r\n\r\n          if (distance < 5000){\r\n            this.branchesMarkersLessFiveKM.push(this.branchesCoords);\r\n          }\r\n          \r\n          this.branchesMarkers.push(this.branchesCoords);\r\n          \r\n          if(filtered){\r\n            this.branches = this.branchesMarkersLessFiveKM;\r\n          }else{\r\n            this.branches = this.branchesMarkers;\r\n\r\n          }\r\n        });\r\n    });\r\n  }\r\n\r\n  async getUserLocation(): Promise<any>{\r\n    var options = {\r\n      enableHighAccuracy: true,\r\n      timeout: 5000,\r\n      maximumAge: 0\r\n    };\r\n    try {\r\n      let resp = await this.geolocation.getCurrentPosition(options);\r\n      this.coords = [resp.coords.latitude, resp.coords.longitude]\r\n      return this.coords;\r\n    } catch (error) {\r\n      console.log('Error getting location', error);\r\n      this.presentAlert({\r\n        subHeader: 'Access to geolocation was blocked',\r\n        message: 'Please allow location detection to use feature'\r\n      });\r\n    }\r\n  }\r\n\r\n  async initializeMap(){\r\n      let coords = await this.getUserLocation();\r\n\r\n      this.center = latLng(coords);\r\n      this.zoom = 14;\r\n    \r\n      this.userLoc =  marker( coords, {\r\n          icon: icon({\r\n            iconSize: [ 25, 41 ],\r\n            iconAnchor: [ 13, 41 ],\r\n            iconUrl: '../assets/img/default_location_marker.png',\r\n            shadowUrl: 'assets/marker-shadow.png'\r\n          })\r\n      });\r\n\r\n      this.options = {\r\n          layers: [this.streetMaps, this.userLoc],\r\n          zoom: this.zoom,\r\n          zoomControl: false,\r\n          center: this.center\r\n      };\r\n\r\n      this.mapInit = true;\r\n\r\n  };\r\n\r\n    async onMapReady(map: L.Map) {\r\n      setTimeout(() => {\r\n        map.invalidateSize();\r\n      }, 0);\r\n\r\n      this.map = map;\r\n    };\r\n\r\n    meterToKM(dist){\r\n       dist = dist / 1000;\r\n       return Math.round( dist * 100 + Number.EPSILON ) / 100;\r\n    };\r\n\r\n    \r\n    async onMarkerClick(branch,marker?) {\r\n      await this.map.setView(branch.coordinates, 18);\r\n      // var popup = new L.Popup({\r\n      //   offset:  new L.Point(0, -40)\r\n      // });\r\n      // popup.setLatLng(branch.coordinates);\r\n      // popup.setContent('<h4>'+ branch.branch_name + '</h4>');\r\n      // this.map.openPopup(popup);\r\n\r\n      const branchPopUp = await this.alertController.create({\r\n        header: branch.branch_name,\r\n        subHeader: branch.address,\r\n        message:`\r\n        <div>\r\n          <p>\r\n            <a href=\"`+ branch.facebook_link + `\">` +\r\n              branch.facebook_link +\r\n           `</a>\r\n          </p>\r\n          <hr>\r\n          <p>\r\n            <span>Branch Distance: </span>`+ this.meterToKM(branch.distance) + ` km\r\n          </p>\r\n        </div>\r\n        `,\r\n        buttons: [\r\n          {\r\n            text: 'View Details',\r\n            handler: () => {\r\n              this.navCtrl.navigateForward('/branchprofile', { queryParams: { id: branch.id }});\r\n            }\r\n          },\r\n          {\r\n            text: 'Cancel',\r\n            role: 'cancel',\r\n            cssClass: 'secondary'\r\n          }\r\n        ]\r\n      });\r\n  \r\n      await branchPopUp.present();\r\n        branchPopUp.onDidDismiss().then((data) => {});\r\n    }\r\n\r\n    async presentAlert(message:any) {\r\n      const alert = await this.alertController.create({\r\n        header: 'Alert',\r\n        subHeader: message.subHeader,\r\n        message: message.message,\r\n        buttons: ['OK']\r\n      });\r\n  \r\n      await alert.present();\r\n      alert.onDidDismiss().then((data) => {\r\n        this.navCtrl.navigateRoot('/choosecomp');\r\n      });\r\n    }\r\n\r\n    async showAdvancedPicker() {\r\n      let opts: PickerOptions = {\r\n        cssClass: 'branch-picker',\r\n        buttons: [\r\n          {\r\n            text: 'Cancel',\r\n            role: 'cancel'\r\n          },\r\n          {\r\n            text: 'Done',\r\n            cssClass: 'special-done'\r\n          }\r\n        ],\r\n        columns: [\r\n          {\r\n            name: 'filter',\r\n            options: [\r\n              { text: 'All Branches', value: 'all' },\r\n              { text: 'Nearest Branches (5 KM)', value: 'nearest' }\r\n            ]\r\n          }\r\n        ]\r\n      };\r\n\r\n      let picker = await this.pickerCtrl.create(opts);\r\n      picker.present();\r\n      picker.onDidDismiss().then(async data => {\r\n        let col = await picker.getColumn('filter');\r\n        this.filter = col.options[col.selectedIndex].text;\r\n        if(col.options[col.selectedIndex].value == 'all'){\r\n          this.getBranches(false);\r\n        }else{\r\n          this.getBranches(true);\r\n        }\r\n      });\r\n    }\r\n\r\n    showList(){\r\n      this.navCtrl.navigateForward('/branch-list');\r\n    }\r\n}\r\n"],"sourceRoot":""}